/*!
 * accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
!function(n,r){function e(n){return!!(""===n||n&&n.charCodeAt&&n.substr)}function t(n){return l?l(n):"[object Array]"===p.call(n)}function o(n){return n&&"[object Object]"===p.call(n)}function u(n,r){var e;n=n||{},r=r||{};for(e in r)r.hasOwnProperty(e)&&null==n[e]&&(n[e]=r[e]);return n}function a(n,r,e){var t,o,u=[];if(!n)return u;if(f&&n.map===f)return n.map(r,e);for(t=0,o=n.length;o>t;t++)u[t]=r.call(e,n[t],t,n);return u}function i(n,r){return n=Math.round(Math.abs(n)),isNaN(n)?r:n}function c(n){var r=s.settings.currency.format;return"function"==typeof n&&(n=n()),e(n)&&n.match("%v")?{pos:n,neg:n.replace("-","").replace("%v","-%v"),zero:n}:n&&n.pos&&n.pos.match("%v")?n:e(r)?s.settings.currency.format={pos:r,neg:r.replace("%v","-%v"),zero:r}:r}var s={};s.version="0.4.2",s.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3,round:0},number:{precision:0,grouping:3,thousand:",",decimal:".",round:0}};var f=Array.prototype.map,l=Array.isArray,p=Object.prototype.toString,m=s.unformat=s.parse=function(n,r){if(t(n))return a(n,function(n){return m(n,r)});if(n=n||0,"number"==typeof n)return n;r=r||s.settings.number.decimal;var e=new RegExp("[^0-9-"+r+"]",["g"]),o=parseFloat((""+n).replace(/\((?=\d+)(.*)\)/,"-$1").replace(e,"").replace(r,"."));return isNaN(o)?0:o},d=s.toFixed=function(n,r,e){r=i(r,s.settings.number.precision);var t,o=Number(s.unformat(n)+"e"+r);t=e>0?Math.ceil:0>e?Math.floor:Math.round;var u=t(o),a=Number(u+"e-"+r).toFixed(r);return a},g=s.formatNumber=s.format=function(n,r,e,c,f){if(t(n))return a(n,function(n){return g(n,r,e,c,f)});n=m(n);var l=u(o(r)?r:{precision:r,thousand:e,decimal:c,round:f},s.settings.number),p=i(l.precision),h=0>n?"-":"",b=parseInt(d(Math.abs(n||0),p,l.round),10)+"",y=b.length>3?b.length%3:0;return h+(y?b.substr(0,y)+l.thousand:"")+b.substr(y).replace(/(\d{3})(?=\d)/g,"$1"+l.thousand)+(p?l.decimal+d(Math.abs(n),p,l.round).split(".")[1]:"")},h=s.formatMoney=function(n,r,e,f,l,p,d){if(t(n))return a(n,function(n){return h(n,r,e,f,l,p,d)});n=m(n);var b=u(o(r)?r:{symbol:r,precision:e,thousand:f,decimal:l,format:p,round:d},s.settings.currency),y=c(b.format),v=n>0?y.pos:0>n?y.neg:y.zero;return v.replace("%s",b.symbol).replace("%v",g(Math.abs(n),i(b.precision),b.thousand,b.decimal,b.round))};s.formatColumn=function(n,r,f,l,p,d,h){if(!n||!t(n))return[];var b=u(o(r)?r:{symbol:r,precision:f,thousand:l,decimal:p,format:d,round:h},s.settings.currency),y=c(b.format),v=y.pos.indexOf("%s")<y.pos.indexOf("%v")?!0:!1,x=0,M=a(n,function(n,r){if(t(n))return s.formatColumn(n,b);n=m(n);var e=n>0?y.pos:0>n?y.neg:y.zero,o=e.replace("%s",b.symbol).replace("%v",g(Math.abs(n),i(b.precision),b.thousand,b.decimal,b.round));return o.length>x&&(x=o.length),o});return a(M,function(n,r){return e(n)&&n.length<x?v?n.replace(b.symbol,b.symbol+new Array(x-n.length+1).join(" ")):new Array(x-n.length+1).join(" ")+n:n})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports.accounting=s):"function"==typeof define&&define.amd?define([],function(){return s}):(s.noConflict=function(e){return function(){return n.accounting=e,s.noConflict=r,s}}(n.accounting),n.accounting=s)}(this);
