/*!
 * accounting.js v0.3.2, copyright 2011 Joss Crowcroft, MIT license, http://josscrowcroft.github.com/accounting.js
 */
(function(r,B){function s(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function n(a){return w?w(a):"[object Array]"===x.call(a)}function t(a){return a&&"[object Object]"===x.call(a)}function u(a,b){var d;a=a||{};b=b||{};for(d in b)b.hasOwnProperty(d)&&null==a[d]&&(a[d]=b[d]);return a}function k(a,b,d){var c=[],e,h;if(!a)return c;if(y&&a.map===y)return a.map(b,d);e=0;for(h=a.length;e<h;e++)c[e]=b.call(d,a[e],e,a);return c}function p(a,b){a=Math.round(Math.abs(a));return isNaN(a)?b:a}function z(a){var b=
c.settings.currency.format;"function"===typeof a&&(a=a());return s(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:!a||!a.pos||!a.pos.match("%v")?!s(b)?b:c.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:a}var c={version:"0.3.2",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},y=Array.prototype.map,w=Array.isArray,x=Object.prototype.toString,q=c.unformat=
c.parse=function(a,b){if(n(a))return k(a,function(a){return q(a,b)});a=a||0;if("number"===typeof a)return a;b=b||c.settings.number.decimal;var d=RegExp("[^0-9-"+b+"]",["g"]),d=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(d,"").replace(b,"."));return!isNaN(d)?d:0},A=c.toFixed=function(a,b){b=p(b,c.settings.number.precision);var d=Math.pow(10,b);return(Math.round(c.unformat(a)*d)/d).toFixed(b)},v=c.formatNumber=function(a,b,d,j){if(n(a))return k(a,function(a){return v(a,b,d,j)});a=q(a);var e=
u(t(b)?b:{precision:b,thousand:d,decimal:j},c.settings.number),h=p(e.precision),f=0>a?"-":"",g=parseInt(A(Math.abs(a||0),h),10)+"",m=3<g.length?g.length%3:0;return f+(m?g.substr(0,m)+e.thousand:"")+g.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(h?e.decimal+A(Math.abs(a),h).split(".")[1]:"")},C=c.formatMoney=function(a,b,d,j,e,h){if(n(a))return k(a,function(a){return C(a,b,d,j,e,h)});a=q(a);var f=u(t(b)?b:{symbol:b,precision:d,thousand:j,decimal:e,format:h},c.settings.currency),g=z(f.format);
return(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",v(Math.abs(a),p(f.precision),f.thousand,f.decimal))};c.formatColumn=function(a,b,d,j,e,h){if(!a)return[];var f=u(t(b)?b:{symbol:b,precision:d,thousand:j,decimal:e,format:h},c.settings.currency),g=z(f.format),m=g.pos.indexOf("%s")<g.pos.indexOf("%v")?!0:!1,l=0;a=k(a,function(a){if(n(a))return c.formatColumn(a,f);a=q(a);a=(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",v(Math.abs(a),p(f.precision),f.thousand,f.decimal));
a.length>l&&(l=a.length);return a});return k(a,function(a){return s(a)&&a.length<l?m?a.replace(f.symbol,f.symbol+Array(l-a.length+1).join(" ")):Array(l-a.length+1).join(" ")+a:a})};if("undefined"!==typeof exports)"undefined"!==typeof module&&module.exports&&(exports=module.exports=c),exports.accounting=c;else if("function"===typeof define&&define.amd)define("accounting",[],function(){return c});else{var D=r.accounting;c.noConflict=function(){r.accounting=D;c.noConflict=B;return c};r.accounting=c}})(this);
