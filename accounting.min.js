/*!
 * A fork by https://github.com/xzyfer/accounting.js
 */
/*!
 * accounting.js v0.3.2, copyright 2011 Joss Crowcroft, MIT license, http://josscrowcroft.github.com/accounting.js
 */
;(function(j,B){function r(a){return!!(""===a||a&&a.charCodeAt&&a.substr)}function n(a){return w?w(a):"[object Array]"===x.call(a)}function s(a){return a&&"[object Object]"===x.call(a)}function t(a,b){var d;a=a||{};b=b||{};for(d in b)b.hasOwnProperty(d)&&null==a[d]&&(a[d]=b[d]);return a}function l(a,b,d){var c=[],e,h;if(!a)return c;if(y&&a.map===y)return a.map(b,d);e=0;for(h=a.length;e<h;e++)c[e]=b.call(d,a[e],e,a);return c}function p(a,b){a=Math.round(Math.abs(a));return isNaN(a)?b:a}function z(a){var b=
c.settings.currency.format;"function"===typeof a&&(a=a());return r(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:!a||!a.pos||!a.pos.match("%v")?!r(b)?b:c.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:a}var c={version:"0.3.2",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},y=Array.prototype.map,w=Array.isArray,x=Object.prototype.toString,q=c.unformat=
c.parse=function(a,b){if(n(a))return l(a,function(a){return q(a,b)});a=a||0;if("number"===typeof a)return a;b=b||c.settings.number.decimal;var d=RegExp("[^0-9-"+b+"]",["g"]),d=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(d,"").replace(b,"."));return!isNaN(d)?d:0},A=c.toFixed=function(a,b){b=p(b,c.settings.number.precision);var d=Math.pow(10,b);return(Math.round(c.unformat(a)*d)/d).toFixed(b)},u=c.formatNumber=function(a,b,d,k){if(n(a))return l(a,function(a){return u(a,b,d,k)});a=q(a);var e=
t(s(b)?b:{precision:b,thousand:d,decimal:k},c.settings.number),h=p(e.precision),f=0>a?"-":"",g=parseInt(A(Math.abs(a||0),h),10)+"",v=3<g.length?g.length%3:0;return f+(v?g.substr(0,v)+e.thousand:"")+g.substr(v).replace(/(\d{3})(?=\d)/g,"$1"+e.thousand)+(h?e.decimal+A(Math.abs(a),h).split(".")[1]:"")},C=c.formatMoney=function(a,b,d,k,e,h){if(n(a))return l(a,function(a){return C(a,b,d,k,e,h)});a=q(a);var f=t(s(b)?b:{symbol:b,precision:d,thousand:k,decimal:e,format:h},c.settings.currency),g=z(f.format);
return(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",u(Math.abs(a),p(f.precision),f.thousand,f.decimal))};c.formatColumn=function(a,b,d,k,e,h){if(!a)return[];var f=t(s(b)?b:{symbol:b,precision:d,thousand:k,decimal:e,format:h},c.settings.currency),g=z(f.format),j=g.pos.indexOf("%s")<g.pos.indexOf("%v")?!0:!1,m=0;a=l(a,function(a){if(n(a))return c.formatColumn(a,f);a=q(a);a=(0<a?g.pos:0>a?g.neg:g.zero).replace("%s",f.symbol).replace("%v",u(Math.abs(a),p(f.precision),f.thousand,f.decimal));
a.length>m&&(m=a.length);return a});return l(a,function(a){return r(a)&&a.length<m?j?a.replace(f.symbol,f.symbol+Array(m-a.length+1).join(" ")):Array(m-a.length+1).join(" ")+a:a})};var D=j.accounting;c.noConflict=function(){j.accounting=D;c.noConflict=B;return c};j.accounting&&j.accounting.settings&&(c.settings=j.accounting.settings);j.accounting=c;"function"===typeof define&&define.amd&&define("accounting",function(){return c})})(this);
